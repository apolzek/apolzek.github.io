<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://apolzek.github.io/assets/css/dracula.css"><link rel="preconnect" href="https://cdnjs.cloudflare.com"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><title> Kafka and RabbitMQ on Kubernetes using Kind - apolzek</title><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&display=swap" rel="stylesheet"><link rel="shortcut icon" href="https://apolzek.github.io/assets/img/apolzek.ico"><link rel="alternate" type="application/atom+xml" title="apolzek" href="https://apolzek.github.io/atom.xml"><link rel="alternate" type="application/json" title="apolzek" href="https://apolzek.github.io/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="https://apolzek.github.io/sitemap.xml" /><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0}html{font-size:13px}#theme-toggle{opacity:0.65;position:relative;border-radius:5px;height:25px;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;transition:opacity 0.3s ease 0s;border:none;outline:none;background:none;cursor:pointer;padding:0px;appearance:none;transform:scale(0.8)}html,html[data-theme="light"]{--very-light-text-color: rgb(222, 222, 222);--light-text-color: rgb(196, 187, 240);--medium-text-color: #555;--main-text-color: #333;--dark-text-color: #393e46;--link-color: rgb(94, 6, 105);--code-bg-color: rgb(240, 240, 240);background-color:#fff}html #theme-toggle div,html[data-theme="light"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent, transparent);transform:scale(1);transition:all 0.45s ease 0s;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon, #2d3748)}html #theme-toggle div::before,html[data-theme="light"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;transform:translate(0px, 0px);opacity:1;transition:transform 0.45s ease 0s}html #theme-toggle div::after,html[data-theme="light"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),0 23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),-23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748);transform:scale(0);transition:all 0.35s ease 0s}html[data-theme="dark"]{--very-light-text-color: rgb(200,200,200);--light-text-color: #c4bbf0;--medium-text-color: #52057b;--main-text-color: rgb(244,244,244);--dark-text-color: rgb(36, 38, 42);--link-color: rgb(234, 118, 203);--code-bg-color: rgb(60, 60, 60);background-color:#131418}html[data-theme="dark"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:4px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);background-color:var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(0.55);transition:all 0.45s ease 0s;overflow:visible;box-shadow:none}html[data-theme="dark"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:2px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);border-radius:50%;transform:translate(14px, -14px);opacity:0;transition:transform 0.45s ease 0s}html[data-theme="dark"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),0 23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(1);transition:all 0.35s ease 0s}body{font-family:"Fira Code", monospace;text-rendering:optimizeLegibility;line-height:1.75;color:var(--main-text-color)}a{color:var(--link-color);text-decoration:none}.post p{margin:1rem 0}.meta{margin:1.4rem 0}code,pre{background:var(--code-bg-color);margin:0 -27px;border-width:1px}code{margin:unset;padding:0.1rem}pre code{background-color:unset;color:unset}pre{overflow-x:scroll;border-width:5px;padding:0.8rem;border-radius:5px;border-style:none none none solid;border-color:var(--link-color)}img{max-width:100%;display:block;margin-left:auto;margin-right:auto}hr{background:var(--light-text-color);height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:0.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem 0}section{margin-top:5.5rem}blockquote{font-style:italic;border-left:5px solid var(--dark-text-color);padding-left:1rem}h1{color:var(--main-text-color);font-size:1.4rem;font-weight:bold;margin-bottom:1rem;margin-top:1.5rem}h2{font-weight:bold;font-size:1.3rem;margin-bottom:1rem;margin-top:1.5rem}h3,h4,h5{font-weight:bold;margin-bottom:1rem;margin-top:1.5rem}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts>h3{font-weight:500}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:bold}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}time{color:var(--main-text-color)}.post>h1.title{font-size:x-large;margin-top:0;margin-bottom:0}.post>time{margin-bottom:0;margin-top:3rem}main{display:flex;max-width:47rem;margin:-5rem auto 0;padding:2.4rem 2rem;flex-direction:column}.flex-row-between{display:flex;flex-direction:row;justify-content:space-between}.social-footer{padding:1rem;display:flex;justify-content:center;position:initial}.social-footer .social-footer-icons .fa{font-size:1.3rem;color:#a9a9a9}.social-footer .social-footer-icons .fa:hover{color:dimgray;transition:color 0.3s ease-in}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}main{padding:0 2rem}}section{flex-grow:999;display:flex;flex-direction:column}figcaption{font-size:smaller}.bio{margin-bottom:5rem}::selection{background-color:#fffba0;color:#333}.search-article{position:relative}.search-article label[for="search-input"]{position:relative;top:-10px;left:11px}.search-article input[type="search"]{top:-1rem;left:0;border:0;width:100%;height:30px;outline:none;position:absolute;border-radius:5px;padding:10px 10px 10px 35px;color:var(--main-text-color);-webkit-appearance:none;background-color:rgba(128,128,128,0.1);border:1px solid rgba(128,128,128,0.1)}.search-article input[type="search"]::-webkit-input-placeholder{color:#808080}.search-article input[type="search"]::-webkit-search-decoration,.search-article input[type="search"]::-webkit-search-results-decoration{display:none}#search-results{text-align:center}#search-results li{text-align:center;list-style-type:none}.post-nav{display:flex;position:relative;margin-top:0;border-top:2px solid var(--light-text-color);line-height:1.4}.post-nav .post-nav-item{border-bottom:0;padding-bottom:10px;width:50%;padding-top:10px;text-decoration:none;box-sizing:border-box}.post-nav .post-nav-item .post-title{color:var(--main-text-color)}.post-nav .post-nav-item:hover .post-title,.post-nav .post-nav-item:focus .post-title{color:var(--link-color);opacity:0.9}.post-nav .post-nav-item .nav-arrow{font-size:17px;color:var(--main-text-color);margin-bottom:3px;font-weight:bold}.post-nav .post-nav-item:nth-child(odd){padding-left:0;padding-right:20px}.post-nav .post-nav-item:nth-child(even){text-align:right;padding-right:0;padding-left:20px}.tags ul{list-style:none;display:grid;grid-template-columns:auto auto auto auto auto auto;grid-template-rows:auto auto auto auto}.tags li{white-space:normal;text-overflow:ellipsis}.timeline{position:center;width:650px;margin:-6em auto;padding:1px;list-style-type:none}@media (max-width: 860px){.timeline{width:100%}}.timeline:before{position:fixed;left:50%;top:100px;bottom:30px;content:" ";display:block;width:6px;height:15%;border-style:dashed;margin-left:-3px;color:var(--light-text-color)}@media (max-width: 375px){.timeline:before{height:150%}}.timeline li{padding:2em 0}@media (max-width: 860px){.timeline li{padding:2em 0}}.timeline li::after{content:"";display:block;clear:both;visibility:hidden}.direction-l{position:relative;width:287px;float:left;text-align:right}@media (max-width: 860px){.direction-l{float:none;width:100%;text-align:center}}.direction-l .flag{color:#333;box-shadow:-1px 1px 1px rgba(0,0,0,0.52)}.direction-l .flag:after{content:"";position:absolute;left:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-left-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-l .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-l .time-wrapper{float:left}@media (max-width: 860px){.direction-l .time-wrapper{float:none}}.direction-r{position:relative;width:293px;float:right;text-align:left}@media (max-width: 860px){.direction-r{float:none;width:100%;text-align:center}}.direction-r .flag{color:#333;box-shadow:1px 1px 1px rgba(0,0,0,0.52)}.direction-r .flag:after{content:"";position:absolute;right:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-right-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-r .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-r .flag:before{left:-40px}.direction-r .time-wrapper{float:right}@media (max-width: 860px){.direction-r .time-wrapper{float:none}}.flag-wrapper{position:relative;display:inline-block;text-align:center}@media (max-width: 860px){.flag-wrapper{text-align:center}}.flag-wrapper .flag{position:relative;display:inline;background:#f8f8f8;padding:6px 10px;border-radius:5px;font-weight:600;text-align:left}@media (max-width: 860px){.flag-wrapper .flag{background:#fff;z-index:15}}.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:60%;right:-40px;content:' ';display:block;width:12px;height:12px;margin-top:-10px;background:#fff;border-radius:10px;border:4px solid var(--link-color);z-index:10}@media (max-width: 860px){.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:-30px;left:53%;content:' ';display:block;margin-left:-10px}}.time-wrapper{display:inline;line-height:1em;font-size:0.66666em;color:var(--link-color);vertical-align:middle}@media (max-width: 860px){.time-wrapper{display:block;position:relative;margin:4px 0 0 0;z-index:14}}.time-wrapper .time{display:inline-block;padding:4px 6px;background:#f8f8f8}.desc{margin:1em 0.2em -3.5em 0;font-size:0.9em;line-height:1.5em}.desc a{color:var(--link-color);text-decoration:none}.desc a:hover{text-decoration:underline}@media (max-width: 860px){.desc{position:relative;margin:1em 1em 0 1em;padding:1em;background:var(--code-bg-color);box-shadow:0 0 1px rgba(0,0,0,0.2);z-index:15}}</style></head><body><main><section class="post"><div class="flex-row-between"> <a href="https://apolzek.github.io/"><i class="fa fa-chevron-circle-left" aria-hidden="true"></i> home</a> <button title="Change theme" id="theme-toggle" onclick="modeSwitcher()"><div></div></button></div><time datetime="2024-09-29T00:00:00+00:00">Sep 29, 2024 - 10 ' read</time><h1 class="title"> Kafka and RabbitMQ on Kubernetes using Kind</h1><span class="meta"> <a href="https://apolzek.github.io/tag/kafka">kafka</a>, <a href="https://apolzek.github.io/tag/kind">kind</a>, <a href="https://apolzek.github.io/tag/kubernetes">kubernetes</a>, <a href="https://apolzek.github.io/tag/rabbitmq">rabbitmq</a></span><p><strong>saving your time</strong>: <em>manifests to deploy kafka and rabbitmq as stateful set in kind (k8s local)</em></p><h1 id="index"> Index <a href="#index">#</a></h1><ul><li><a href="#index">Index</a><ul><li><a href="#create-kubernetes-cluster-with-kind">Create kubernetes cluster with kind</a></li><li><a href="#kafka">Kafka</a><ul><li><a href="#kafka-kraft-x-kafka-with-zookeeper">Kafka KRaft x Kafka with ZooKeeper</a></li></ul></li><li><a href="#rabbitmq">RabbitMQ</a></li></ul></li></ul><h2 id="create-kubernetes-cluster-with-kind"> Create kubernetes cluster with kind <a href="#create-kubernetes-cluster-with-kind">#</a></h2><p>1) Create kind configuration(<em>kind-config.yaml</em>)</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">cat &lt;&lt;EOF &gt; /tmp/kind-config.yaml</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kind.x-k8s.io/v1alpha4</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Cluster</span>
<span class="na">nodes</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">role</span><span class="pi">:</span> <span class="s">control-plane</span>
  <span class="na">extraPortMappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">30092</span>
    <span class="na">hostPort</span><span class="pi">:</span> <span class="m">30092</span>
    <span class="na">listenAddress</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0.0.0.0"</span> <span class="c1"># Optional, defaults to "0.0.0.0"</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">tcp</span> <span class="c1"># Optional, defaults to tcp</span>
<span class="pi">-</span> <span class="na">role</span><span class="pi">:</span> <span class="s">worker</span>
<span class="pi">-</span> <span class="na">role</span><span class="pi">:</span> <span class="s">worker</span>
<span class="pi">-</span> <span class="na">role</span><span class="pi">:</span> <span class="s">worker</span>
<span class="s">EOF</span>
</code></pre></div></div><p>2) Create a kind cluster</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kind create cluster <span class="nt">--config</span> /tmp/kind-config.yaml <span class="nt">--name</span> my-cluster
</code></pre></div></div><h2 id="kafka"> Kafka <a href="#kafka">#</a></h2><p>1) Apply yaml</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">cat &lt;&lt;EOF | kubectl apply -f -</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Namespace</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">kafka</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">kafka</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">StatefulSet</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">kafka</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kafka</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">kafka-app</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">serviceName</span><span class="pi">:</span> <span class="s">kafka-svc</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">3</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">kafka-app</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">kafka-app</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">kafka-container</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">doughgle/kafka-kraft</span>
          <span class="na">ports</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">9092</span>
            <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">9093</span>
          <span class="na">env</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">REPLICAS</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3'</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">SERVICE</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s">kafka-svc</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">NAMESPACE</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s">kafka</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">SHARE_DIR</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s">/mnt/kafka</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">CLUSTER_ID</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s">bXktY2x1c3Rlci0xMjM0NQ==</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">DEFAULT_REPLICATION_FACTOR</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3'</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">DEFAULT_MIN_INSYNC_REPLICAS</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2'</span>
          <span class="na">volumeMounts</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">data</span>
              <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/mnt/kafka</span>
  <span class="na">volumeClaimTemplates</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">metadata</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">data</span>
      <span class="na">spec</span><span class="pi">:</span>
        <span class="na">accessModes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">ReadWriteOnce"</span>
        <span class="na">resources</span><span class="pi">:</span>
          <span class="na">requests</span><span class="pi">:</span>
            <span class="na">storage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1Gi"</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">kafka-svc</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kafka</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">kafka-app</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">NodePort</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">9092'</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">9092</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="m">9092</span>
      <span class="na">nodePort</span><span class="pi">:</span> <span class="m">30092</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">kafka-app</span>
<span class="s">EOF</span>
</code></pre></div></div><p>2) Create a topic</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl <span class="nb">exec</span> <span class="nt">-it</span> kafka-0 <span class="nt">-n</span> kafka <span class="nt">--</span> bash
kafka-topics.sh <span class="nt">--create</span> <span class="nt">--topic</span> my-topic <span class="nt">--bootstrap-server</span> kafka-svc:9092
kafka-topics.sh <span class="nt">--list</span> <span class="nt">--topic</span> my-topic <span class="nt">--bootstrap-server</span> kafka-svc:9092

<span class="c"># Produce message</span>
kubectl <span class="nb">exec</span> <span class="nt">-it</span> kafka-1 <span class="nt">-n</span> kafka <span class="nt">--</span> bash
kafka-console-producer.sh <span class="nt">--bootstrap-server</span> kafka-svc:9092 <span class="nt">--topic</span> my-topic
</code></pre></div></div><blockquote><p>All pods must be running</p></blockquote><p>3) Consume message</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># consumer</span>
kubectl <span class="nb">exec</span> <span class="nt">-it</span> kafka-1 <span class="nt">-n</span> kafka <span class="nt">--</span> bash
kafka-console-consumer.sh <span class="nt">--bootstrap-server</span> kafka-svc:9092 <span class="nt">--topic</span> my-topic
</code></pre></div></div><blockquote><p>Run the producer and consumer in different Linux terminals</p></blockquote><p>4) Delete topic</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kafka-topics.sh <span class="nt">--delete</span> <span class="nt">--topic</span> my-topic <span class="nt">--bootstrap-server</span> kafka-svc:9092
</code></pre></div></div><h3 id="kafka-kraft-x-kafka-with-zookeeper"> Kafka KRaft x Kafka with ZooKeeper <a href="#kafka-kraft-x-kafka-with-zookeeper">#</a></h3><p><strong>Kafka KRaft Installation</strong>: KRaft is Kafka’s new built-in consensus mechanism that eliminates the need for ZooKeeper. In a KRaft-based installation, Kafka brokers manage metadata and leader election directly, which simplifies the architecture by reducing dependencies. KRaft is becoming the default option in newer Kafka versions because it provides better scalability, faster failover, and an overall more streamlined operation.</p><p><strong>Kafka with ZooKeeper</strong>: In traditional Kafka deployments, ZooKeeper is used to manage the cluster’s metadata, such as broker details and topic configurations. ZooKeeper handles tasks like leader election and tracking which brokers are active. While this setup has been robust for years, it adds complexity by requiring an additional service (ZooKeeper) that must be installed, managed, and maintained alongside Kafka.</p><h2 id="rabbitmq"> RabbitMQ <a href="#rabbitmq">#</a></h2><p>1) Create a YAML file <em>/tmp/rabbitmq.yml</em> with the content below</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Namespace</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq</span>
<span class="na">spec</span><span class="pi">:</span> <span class="pi">{}</span>
<span class="na">status</span><span class="pi">:</span> <span class="pi">{}</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">rabbitmq</span>
<span class="nn">---</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Role</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">rabbitmq</span>
<span class="na">rules</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">"</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">endpoints</span>
  <span class="na">verbs</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">get</span>
    <span class="pi">-</span> <span class="s">list</span>
    <span class="pi">-</span> <span class="s">watch</span>
<span class="nn">---</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">RoleBinding</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">rabbitmq</span>
<span class="na">subjects</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq</span>
<span class="na">roleRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">Role</span> 
  <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rabbit-secret</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">rabbitmq</span>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">RABBITMQ_ERLANG_COOKIE</span><span class="pi">:</span> <span class="s">V0lXVkhDRFRDSVVBV0FOTE1RQVc=</span>
  <span class="na">RABBITMQ_DEFAULT_USER</span><span class="pi">:</span> <span class="s">Y29lbGhv</span>
  <span class="na">RABBITMQ_DEFAULT_PASS</span><span class="pi">:</span> <span class="s">Y29lbGhvQFBhc3M=</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">rabbitmq</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">enabled_plugins</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">[rabbitmq_management,rabbitmq_peer_discovery_k8s].</span>

  <span class="na">rabbitmq.conf</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">## Cluster formation. See http://www.rabbitmq.com/cluster-formation.html to learn more.</span>
    <span class="s">cluster_formation.peer_discovery_backend  = rabbit_peer_discovery_k8s</span>
    <span class="s">cluster_formation.k8s.host = kubernetes.default.svc.cluster.local</span>
    <span class="s">## Should RabbitMQ node name be computed from the pod's hostname or IP address?</span>
    <span class="s">## IP addresses are not stable, so using [stable] hostnames is recommended when possible.</span>
    <span class="s">## Set to "hostname" to use pod hostnames.</span>
    <span class="s">## When this value is changed, so should the variable used to set the RABBITMQ_NODENAME</span>
    <span class="s">## environment variable.</span>
    <span class="s">cluster_formation.k8s.address_type = hostname	  </span>
    <span class="s">## Important - this is the suffix of the hostname, as each node gets "rabbitmq-#", we need to tell what's the suffix</span>
    <span class="s">## it will give each new node that enters the way to contact the other peer node and join the cluster (if using hostname)</span>
    <span class="s">cluster_formation.k8s.hostname_suffix = .rabbitmq.test-rabbitmq.svc.cluster.local</span>
    <span class="s">## How often should node cleanup checks run?</span>
    <span class="s">cluster_formation.node_cleanup.interval = 30</span>
    <span class="s">## Set to false if automatic removal of unknown/absent nodes</span>
    <span class="s">## is desired. This can be dangerous, see</span>
    <span class="s">##  * http://www.rabbitmq.com/cluster-formation.html#node-health-checks-and-cleanup</span>
    <span class="s">##  * https://groups.google.com/forum/#!msg/rabbitmq-users/wuOfzEywHXo/k8z_HWIkBgAJ</span>
    <span class="s">cluster_formation.node_cleanup.only_log_warning = true</span>
    <span class="s">cluster_partition_handling = autoheal</span>
    <span class="s">## See http://www.rabbitmq.com/ha.html#master-migration-data-locality</span>
    <span class="s">queue_master_locator=min-masters</span>
    <span class="s">## See http://www.rabbitmq.com/access-control.html#loopback-users</span>
    <span class="s">loopback_users.guest = false</span>
<span class="s">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">StatefulSet</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">rabbitmq</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">serviceName</span><span class="pi">:</span> <span class="s">rabbitmq</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">3</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">rabbitmq</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">rabbitmq</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">serviceAccountName</span><span class="pi">:</span> <span class="s">rabbitmq</span>
      <span class="na">initContainers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">config</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">busybox</span>
        <span class="na">command</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">/bin/sh'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">-c'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">cp</span><span class="nv"> </span><span class="s">/tmp/config/rabbitmq.conf</span><span class="nv"> </span><span class="s">/config/rabbitmq.conf</span><span class="nv"> </span><span class="s">&amp;&amp;</span><span class="nv"> </span><span class="s">ls</span><span class="nv"> </span><span class="s">-l</span><span class="nv"> </span><span class="s">/config/</span><span class="nv"> </span><span class="s">&amp;&amp;</span><span class="nv"> </span><span class="s">cp</span><span class="nv"> </span><span class="s">/tmp/config/enabled_plugins</span><span class="nv"> </span><span class="s">/etc/rabbitmq/enabled_plugins'</span><span class="pi">]</span>
        <span class="na">volumeMounts</span><span class="pi">:</span> 
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">config</span>
          <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/tmp/config/</span>
          <span class="na">readOnly</span><span class="pi">:</span> <span class="no">false</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">config-file</span>
          <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/config/</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">plugins-file</span>
          <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/etc/rabbitmq/</span>
        <span class="na">resources</span><span class="pi">:</span> <span class="c1"># QoS Guaranteed limit e request iguais</span>
          <span class="na">limits</span><span class="pi">:</span>
            <span class="na">cpu</span><span class="pi">:</span> <span class="m">1</span>
            <span class="na">memory</span><span class="pi">:</span> <span class="s">2Gi</span>
          <span class="na">requests</span><span class="pi">:</span>
            <span class="na">cpu</span><span class="pi">:</span> <span class="m">1</span>
            <span class="na">memory</span><span class="pi">:</span> <span class="s">2Gi</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">rabbitmq:3.13.7-management</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">15672</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">discovery</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">5672</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">amqp</span>
        <span class="na">env</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">RABBIT_POD_NAME</span>
          <span class="na">valueFrom</span><span class="pi">:</span>
            <span class="na">fieldRef</span><span class="pi">:</span>
              <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
              <span class="na">fieldPath</span><span class="pi">:</span> <span class="s">metadata.name</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">RABBIT_POD_NAMESPACE</span>
          <span class="na">valueFrom</span><span class="pi">:</span>
            <span class="na">fieldRef</span><span class="pi">:</span>
              <span class="na">fieldPath</span><span class="pi">:</span> <span class="s">metadata.namespace</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">RABBITMQ_NODENAME</span>
          <span class="na">value</span><span class="pi">:</span> <span class="s">rabbit@$(RABBIT_POD_NAME).rabbitmq.$(RABBIT_POD_NAMESPACE).svc.cluster.local</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">RABBITMQ_USE_LONGNAME</span>
          <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">RABBITMQ_CONFIG_FILE</span>
          <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/config/rabbitmq"</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">RABBITMQ_DEFAULT_USER</span>
          <span class="c1"># value: "user"</span>
          <span class="na">valueFrom</span><span class="pi">:</span>
            <span class="na">secretKeyRef</span><span class="pi">:</span>
              <span class="na">name</span><span class="pi">:</span> <span class="s">rabbit-secret</span>
              <span class="na">key</span><span class="pi">:</span> <span class="s">RABBITMQ_DEFAULT_USER</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">RABBITMQ_DEFAULT_PASS</span>
          <span class="c1"># value: "password"</span>
          <span class="na">valueFrom</span><span class="pi">:</span>
            <span class="na">secretKeyRef</span><span class="pi">:</span>
              <span class="na">name</span><span class="pi">:</span> <span class="s">rabbit-secret</span>
              <span class="na">key</span><span class="pi">:</span> <span class="s">RABBITMQ_DEFAULT_PASS</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">K8S_HOSTNAME_SUFFIX</span>
          <span class="na">value</span><span class="pi">:</span> <span class="s">.rabbitmq.$(RABBIT_POD_NAMESPACE).svc.cluster.local</span>

        <span class="na">volumeMounts</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq-pvc-data</span>
          <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/var/lib/rabbitmq</span>
          <span class="na">readOnly</span><span class="pi">:</span> <span class="no">false</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">config-file</span>
          <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/config/</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">plugins-file</span>
          <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/etc/rabbitmq/</span>
        <span class="na">resources</span><span class="pi">:</span> <span class="c1"># QoS Guaranteed limit e request iguais</span>
          <span class="na">limits</span><span class="pi">:</span>
            <span class="na">cpu</span><span class="pi">:</span> <span class="m">1</span>
            <span class="na">memory</span><span class="pi">:</span> <span class="s">2Gi</span>
          <span class="c1"># requests:</span>
          <span class="c1">#   cpu: 0.2m</span>
          <span class="c1">#   memory: 128Mi</span>

      <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">config-file</span>
        <span class="na">emptyDir</span><span class="pi">:</span> <span class="pi">{}</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">plugins-file</span>
        <span class="na">emptyDir</span><span class="pi">:</span> <span class="pi">{}</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">config</span>
        <span class="na">configMap</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq-config</span>
          <span class="na">defaultMode</span><span class="pi">:</span> <span class="m">0755</span>
  <span class="na">volumeClaimTemplates</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq-pvc-data</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">accessModes</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">ReadWriteOnce"</span><span class="pi">]</span>
      <span class="c1"># storageClassName: huawei-csi</span>
      <span class="na">storageClassName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">standard"</span>
      <span class="na">resources</span><span class="pi">:</span>
        <span class="na">requests</span><span class="pi">:</span>
          <span class="na">storage</span><span class="pi">:</span> <span class="s">1Gi</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rabbitmq</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">rabbitmq</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">ClusterIP</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">15672</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="m">15672</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">discovery</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">5672</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="m">5672</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">amqp</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">rabbitmq</span>
</code></pre></div></div><p>2) Apply file <em>/tmp/rabbitmq.yml</em></p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply <span class="nt">-f</span> /tmp/rabbitmq.yml
</code></pre></div></div><p>3) Port-forward</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl port-forward svc/rabbitmq 15672:15672 <span class="nt">-n</span> rabbitmq
</code></pre></div></div><blockquote><p>Access http://localhost:15672/ User: coelho Password: coelho@Pass</p></blockquote></section><section><nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/2024/09/26/hello-world"><div class="nav-arrow">Previous</div><span class="post-title">Hello World =)</span> </a> <a class="post-nav-item post-nav-next" href="/2024/12/23/essential-shell-tips"><div class="nav-arrow">Next</div><span class="post-title">Essential Shell Tips for Linux Enthusiasts</span> </a></nav></section></main><script> function setTheme(theme) { if (theme === "dark") { document.documentElement.setAttribute('data-theme', 'dark'); window.localStorage.setItem('theme', 'dark'); document.getElementById("theme-toggle").classList.add('sun'); document.getElementById("theme-toggle").classList.remove('moon'); } else { document.documentElement.setAttribute('data-theme', 'light'); window.localStorage.setItem('theme', 'light'); document.getElementById("theme-toggle").classList.add('moon'); document.getElementById("theme-toggle").classList.remove('sun'); } } let theme = localStorage.getItem('theme'); theme = theme || (window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light'); setTheme(theme); function modeSwitcher() { let currentMode = document.documentElement.getAttribute('data-theme'); if (currentMode === "dark") { setTheme('light'); } else { setTheme('dark'); } } </script> <script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script> <script>addBackToTop({ diameter: 48, backgroundColor: 'rgb(196, 187, 240)', textColor: 'black' }) </script></body><footer class="social-footer"><div class="social-footer-icons"> <!-- <a href="https://telegram.me/apolzek" title="dm me" target="_blank" rel="noopener noreferrer"><i class="fa fa-telegram" aria-hidden="true"></i></a> --> <!-- <a href="mailto:p0wex@pm.me" title="Email me"><i class="fa fa-envelope" aria-hidden="true"></i></a> <a href="https://github.com/P0WEX" title="Github profile, nothing much there, yet" target="_blank" rel="noopener noreferrer"><i class="fa fa-github" aria-hidden="true"></i></a> <a href="https://apolzek.github.io/atom.xml" title="RSS feed" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss" aria-hidden="true"></i></a> <a href="https://github.com/P0WEX/Gesko" title="Browse the code" target="_blank" rel="noopener noreferrer"><i class="fa fa-code" aria-hidden="true"></i></a> --></div></footer><script src="https://apolzek.github.io/assets/js/simple-jekyll-search.js"></script> <script> var sjs = SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: 'https://apolzek.github.io/search.json', searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>', noResultsText: 'Não encontrado..', limit: 10, fuzzy: true, }) </script> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-61LXK24CDY"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-61LXK24CDY'); </script></html>
