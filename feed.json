{
    "version": "https://jsonfeed.org/version/1",
    "title": "apolzek",
    "home_page_url": "https://apolzek.github.io/",
    "feed_url": "https://apolzek.github.io/feed.json",
    "description": null,
    "icon": "https://apolzek.github.io/apple-touch-icon.png",
    "favicon": "https://apolzek.github.io/favicon.ico",
    "expired": false,
    
    "author":  {
        "name": "apolzek",
        "url": null,
        "avatar": null
    },
    
"items": [
    
        {
            "id": "https://apolzek.github.io/2026/01/20/proposing-a-workflow",
            "title": "Proposing a Workflow for Complex Architectures",
            "summary": null,
            "content_text": "You are an SRE and you like having a holistic view of the product. Or maybe you are a platform engineer and want to understand every part of the system and how data flows through it. The problem is that the team does not have this view. Most of the knowledge lives in the heads of the most senior people. The decision-making context stayed with them. What you are left with is an outdated inventory and, if you are lucky, a few partially documented flows.That is when you roll up your sleeves and start doing reverse engineering of the product or platform.In practice, you start somewhere. You map connections, figure out which server talks to which one, where the databases are, how read and write flows work. What runs on Kubernetes, what is still on VMware. A hybrid environment, with cloud mixed in. Even with sophisticated tools, the environment is complex. At some point, you have to go all the way down to the network packet level and run tcpdump without mercy.After a long journey, you finally get an updated architecture diagram. Servers, services, ports, external components, everything in one place. A map that actually makes sense.So, what do you do after that?At this point, you understand the end-to-end flows. Just like a doctor blinks and “sees” human anatomy, you blink and see the entire system. As Uncle Ben said, with great power comes great responsibility. Your role now is to help less senior people reach the same level of understanding. The people who support the system also need this view, so they can break out of the endless loop of repetitive on-call actions.This is where you start thinking about how to make this knowledge fluid, accessible, and evolvable. And this is exactly where the workflow I have been enjoying comes in.Nothing I am proposing here is new. All of this already exists and works well. If there is any merit here, it is probably just about connecting the dots. “Connect the dots,” as Steve Jobs once said.The idea is simple: once you finish the architecture drawing, translate it into Mermaid, following some standards. You can define your own, but here are the steps I usually follow. From a napkin sketch to Mermaid.      Add all components, organized into groups and subgroups. VMs are not Kubernetes, so they should be separate groups. Each has its own characteristics, and that should be explicit.        Add the arrows connecting components, but always think in terms of flows. Read vs write flows, primary vs secondary, user vs system. Mermaid supports styling, so take advantage of that. Use different arrow styles, annotations on components, or notes directly on the arrows. Something like a #cash-in tag already adds useful context.        Once you define a visual standard, document it. Create a separate Mermaid diagram that acts as a legend. This is the “how to work with this diagram” guide. Everyone on the team should follow it. You do not want to be the owner of this diagram. Trust me.        With the flow documented, it is time to work on top of it. Create a page for ADRs (Architecture Decision Records). For each proposed change, document the change itself, the context, the options (P1, P2, P3), what is expected from each, and whether it was accepted or not. If it was accepted, state which one. Depending on the company, this will turn into a GMUD or an RFC, the formal change document.        When you schedule a meeting to discuss the change, if it makes sense, open the Mermaid diagram in Excalidraw. It supports Mermaid natively. Import the diagram without worrying about styles. This is where the team discusses solutions, scribbles, connects and disconnects arrows, and explores possibilities freely.        If the change is approved, execute the GMUD or RFC. Do it with a clear plan: post-execution tests, a rollback plan, documented monitoring, and properly tuned alerts. No production heroics.        If everything goes well, update the status of the GMUD, RFC, and the ADR to “accepted,” clearly stating which solution was chosen, especially if there were multiple options.        Update the official Mermaid diagram with all the changes that came out of the Excalidraw session. Add context and notify the team and stakeholders about the change.  After all that, make some coffee and go listen to good music. You earned it.flowchart LR    A --&gt; B    B --&gt; C    C --&gt; D    D --&gt; E    %% Todos os links da mesma cor/espessura    linkStyle default stroke:#ff4444,stroke-width:3px    %% Só links específicos (começa do 0 na ordem que aparecem)    linkStyle 0 stroke:#00cc00,stroke-width:5px    linkStyle 2 stroke:blue,stroke-dasharray: 5 5",
            "content_html": "<p>You are an SRE and you like having a holistic view of the product. Or maybe you are a platform engineer and want to understand every part of the system and how data flows through it. The problem is that the team does not have this view. Most of the knowledge lives in the heads of the most senior people. The decision-making context stayed with them. What you are left with is an outdated inventory and, if you are lucky, a few partially documented flows.</p><p>That is when you roll up your sleeves and start doing reverse engineering of the product or platform.</p><p>In practice, you start somewhere. You map connections, figure out which server talks to which one, where the databases are, how read and write flows work. What runs on Kubernetes, what is still on VMware. A hybrid environment, with cloud mixed in. Even with sophisticated tools, the environment is complex. At some point, you have to go all the way down to the network packet level and run tcpdump without mercy.</p><p>After a long journey, you finally get an updated architecture diagram. Servers, services, ports, external components, everything in one place. A map that actually makes sense.</p><p>So, what do you do after that?</p><p>At this point, you understand the end-to-end flows. Just like a doctor blinks and “sees” human anatomy, you blink and see the entire system. As Uncle Ben said, with great power comes great responsibility. Your role now is to help less senior people reach the same level of understanding. The people who support the system also need this view, so they can break out of the endless loop of repetitive on-call actions.</p><p>This is where you start thinking about how to make this knowledge fluid, accessible, and evolvable. And this is exactly where the workflow I have been enjoying comes in.</p><p>Nothing I am proposing here is new. All of this already exists and works well. If there is any merit here, it is probably just about connecting the dots. “Connect the dots,” as Steve Jobs once said.</p><p>The idea is simple: once you finish the architecture drawing, translate it into Mermaid, following some standards. You can define your own, but here are the steps I usually follow. From a napkin sketch to Mermaid.</p><ol>  <li>    <p>Add all components, organized into groups and subgroups. VMs are not Kubernetes, so they should be separate groups. Each has its own characteristics, and that should be explicit.</p>  </li>  <li>    <p>Add the arrows connecting components, but always think in terms of flows. Read vs write flows, primary vs secondary, user vs system. Mermaid supports styling, so take advantage of that. Use different arrow styles, annotations on components, or notes directly on the arrows. Something like a <code class=\"language-plaintext highlighter-rouge\">#cash-in</code> tag already adds useful context.</p>  </li>  <li>    <p>Once you define a visual standard, document it. Create a separate Mermaid diagram that acts as a legend. This is the “how to work with this diagram” guide. Everyone on the team should follow it. You do not want to be the owner of this diagram. Trust me.</p>  </li>  <li>    <p>With the flow documented, it is time to work on top of it. Create a page for ADRs (Architecture Decision Records). For each proposed change, document the change itself, the context, the options (P1, P2, P3), what is expected from each, and whether it was accepted or not. If it was accepted, state which one. Depending on the company, this will turn into a GMUD or an RFC, the formal change document.</p>  </li>  <li>    <p>When you schedule a meeting to discuss the change, if it makes sense, open the Mermaid diagram in Excalidraw. It supports Mermaid natively. Import the diagram without worrying about styles. This is where the team discusses solutions, scribbles, connects and disconnects arrows, and explores possibilities freely.</p>  </li>  <li>    <p>If the change is approved, execute the GMUD or RFC. Do it with a clear plan: post-execution tests, a rollback plan, documented monitoring, and properly tuned alerts. No production heroics.</p>  </li>  <li>    <p>If everything goes well, update the status of the GMUD, RFC, and the ADR to “accepted,” clearly stating which solution was chosen, especially if there were multiple options.</p>  </li>  <li>    <p>Update the official Mermaid diagram with all the changes that came out of the Excalidraw session. Add context and notify the team and stakeholders about the change.</p>  </li></ol><p>After all that, make some coffee and go listen to good music. You earned it.</p><pre><code class=\"language-mermaid\">flowchart LR    A --&gt; B    B --&gt; C    C --&gt; D    D --&gt; E    %% Todos os links da mesma cor/espessura    linkStyle default stroke:#ff4444,stroke-width:3px    %% Só links específicos (começa do 0 na ordem que aparecem)    linkStyle 0 stroke:#00cc00,stroke-width:5px    linkStyle 2 stroke:blue,stroke-dasharray: 5 5</code></pre>",
            "url": "https://apolzek.github.io/2026/01/20/proposing-a-workflow",
            
            
            
            
            
            "date_published": "2026-01-20T00:00:00+00:00",
            "date_modified": "2026-01-20T00:00:00+00:00",
            
                "author":  {
                "name": "apolzek",
                "url": null,
                "avatar": null
                }
                
            
        },
    
        {
            "id": "https://apolzek.github.io/2026/01/16/apolzek",
            "title": "apolzek",
            "summary": null,
            "content_text": "Júlio, from Cocoricó, is the pure embodiment of a curious boy. He lives on a farm, but his mind is always wandering: he asks questions, imagines possibilities, tests slightly crazy hypotheses, and learns along the way. His curiosity isn’t just about knowing “what something is,” but “why it is that way” and “what if it were different.” This often puts him in confusing situations, but it is also the driving force behind all his discoveries.Like Júlio, I am trying to return to the purity of my being and relearn how to learn. This blog is a mixture of technical topics, philosophical reflections, personal confessions, and worldviews. Here, I write primarily for myself, with the intention of being honest rather than performing for the world.Some people use a nickname to hide behind a character. To me, our given name is already a projection of the person we pretend to be. We naturally create a social mask to navigate the world and interact with others. That’s why apolzek is where I place my essence and express my true identity.If you’ve stumbled upon this, welcome aboard! When you read any post here, know that you’ll be behind the scenes of my mind. Let’s go together, let’s go with God.",
            "content_html": "<p><strong>Júlio</strong>, from <em>Cocoricó</em>, is the pure embodiment of a curious boy. He lives on a farm, but his mind is always wandering: he asks questions, imagines possibilities, tests slightly crazy hypotheses, and learns along the way. His curiosity isn’t just about knowing “what something is,” but “why it is that way” and “what if it were different.” This often puts him in confusing situations, but it is also the driving force behind all his discoveries.</p><p>Like Júlio, I am trying to return to the purity of my being and relearn how to learn. This blog is a mixture of technical topics, philosophical reflections, personal confessions, and worldviews. Here, I write primarily for myself, with the intention of being honest rather than performing for the world.</p><p>Some people use a nickname to hide behind a character. To me, our given name is already a projection of the person we pretend to be. We naturally create a social mask to navigate the world and interact with others. That’s why <strong>apolzek</strong> is where I place my essence and express my true identity.</p><p>If you’ve stumbled upon this, welcome aboard! When you read any post here, know that you’ll be behind the scenes of my mind. Let’s go together, let’s go with <strong>God</strong>.</p><!--Daughter, 2025 Jan 15 you were extubated at Vila da Serra Hospital. I am so happy that it creates indescribable reactions in me. I love you, I love our family, I love life, I love God.--><!-- My birth name, Vinícius Gomes Batista, is the name I was given when I was presented to God and welcomed into this life. It holds my story, my family roots, and a sense of purpose. Over the years, though, that name has picked up so many layers. Social expectations, roles I learned to play, ways I adapted to fit in. Most of the time those things don’t feel like the real me at my deepest level. That’s why I created apolzek. It’s not about replacing Vinícius or turning my back on him. It’s more like a deliberate practice, almost a quiet sacred space, where I try to bring the real Vinícius closer to who he truly is underneath everything. When I’m in apolzek mode, I focus on stripping away those extra layers. I try to speak and act with complete honesty toward myself, and I refuse to let the outside world tell me who I’m supposed to be. In those moments it’s just me, no masks, standing in front of God.-->",
            "url": "https://apolzek.github.io/2026/01/16/apolzek",
            
            
            
            
            
            "date_published": "2026-01-16T00:00:00+00:00",
            "date_modified": "2026-01-16T00:00:00+00:00",
            
                "author":  {
                "name": "apolzek",
                "url": null,
                "avatar": null
                }
                
            
        },
    
        {
            "id": "https://apolzek.github.io/2024/09/29/proto",
            "title": "Proto",
            "summary": null,
            "content_text": "Exploring the OTLP Data Format (OpenTelemetry Protocol)Introduction to OTLPThe OpenTelemetry Protocol (OTLP) is the native and standardized protocol for transmitting telemetry data within the OpenTelemetry ecosystem. It defines how traces, metrics, logs, and profiles (experimental) are serialized, transported, and delivered between instrumented applications and observability backends.Supported Data Types (Signals)OTLP works with 4 main types of telemetry signals:1. Traces (Stable)  Endpoint: /v1/traces  Main Components:          Span: Unit of work in a distributed trace      SpanEvent: Point-in-time event during span execution      SpanLink: Connections between related spans        Use Cases: Distributed tracing, latency analysis, bottleneck detection2. Metrics (Stable)  Endpoint: /v1/metrics  Main Components:          Metric: Aggregated measurement (Gauge, Sum, Histogram, ExponentialHistogram, Summary)      DataPoint: Individual value at a specific timestamp        Use Cases: Performance monitoring, alerting, dashboards3. Logs (Stable)  Endpoint: /v1/logs  Main Components:          LogRecord: Structured log entry        Use Cases: Debugging, auditing, correlation with traces4. Profiles (Development)  Endpoint: /v1development/profiles  Main Components:          Profile: CPU and memory profiling data        Status: Experimental (OTLP 1.9.0)  Use Cases: Code-level performance analysisTransport ProtocolsOTLP supports two protocols:            Protocol      Default Port      Encoding      Recommended Use                  gRPC      4317      Binary Protobuf      High performance, internal communication              HTTP      4318      Binary Protobuf / JSON      Wide compatibility, web applications      Exploring the OTLP SchemaPrerequisites# Install required toolsbrew install bufbuild/buf/bufbrew install protobufCloning the Official Repositorygit clone https://github.com/open-telemetry/opentelemetry-proto.gitcd opentelemetry-protoViewing Protobuf Definitions# Inspect individual schemascat opentelemetry/proto/trace/v1/trace.protocat opentelemetry/proto/metrics/v1/metrics.protocat opentelemetry/proto/logs/v1/logs.protocat opentelemetry/proto/profiles/v1development/profiles.protoGenerating Complete SchemaOption 1: JSON Format (readable)# Generate complete schema in JSONbuf build -o -#format=json | jq '.' &gt; otlp-schema.json# Extract only specific data typesbuf build -o -#format=json | \\  jq '.file[] | select(.name | contains(\"trace\")) | .messageType' &gt; traces-schema.jsonOption 2: File Descriptor Set (binary)# Generate binary descriptor with all dependenciesprotoc \\  --descriptor_set_out=otlp-complete.desc \\  --include_imports \\  opentelemetry/proto/trace/v1/trace.proto \\  opentelemetry/proto/metrics/v1/metrics.proto \\  opentelemetry/proto/logs/v1/logs.proto \\  opentelemetry/proto/profiles/v1development/profiles.proto# Inspect content (raw format)protoc --decode_raw &lt; otlp-complete.desc | head -n 50Validating Structure with Buf# Lint protobuf definitionsbuf lint# Check for breaking changes (comparing with previous version)buf breaking --against '.git#branch=main'# Generate HTML documentationbuf build -o -#format=json | \\  jq -r '.file[].messageType[] | \"## \\(.name)\\n\\(.field[])\"' &gt; docs.mdHierarchical Data StructureAll OTLP signals follow this hierarchy:ResourceSpans/ResourceMetrics/ResourceLogs/ResourceProfiles└── Resource (entity attributes: service.name, host, etc)    └── ScopeSpans/ScopeMetrics/ScopeLogs/ScopeProfiles        └── InstrumentationScope (library that generated the data)            └── Spans / Metrics / LogRecords / ProfilesPractical Example: Analyzing a Trace# Export example trace to JSONbuf build -o -#format=json | \\  jq '.file[] | select(.name == \"opentelemetry/proto/trace/v1/trace.proto\") |       .messageType[] | select(.name == \"Span\")' &gt; span-structure.json# Main fields of a Spancat span-structure.json | jq '.field[] | {name, type, number}'OTLP Data Types ReferenceComplete JSON Schema{  \"otlp_data_types\": {    \"traces\": {      \"status\": \"stable\",      \"endpoint\": \"/v1/traces\",      \"service\": \"ExportTraceServiceRequest\",      \"main_types\": {        \"span\": {          \"description\": \"Represents a unit of work or operation in a distributed trace\",          \"proto\": \"opentelemetry/proto/trace/v1/trace.proto\"        },        \"span_event\": {          \"description\": \"Point-in-time event that occurs during span execution\",          \"proto\": \"opentelemetry/proto/trace/v1/trace.proto\"        }      }    },    \"metrics\": {      \"status\": \"stable\",      \"endpoint\": \"/v1/metrics\",      \"service\": \"ExportMetricsServiceRequest\",      \"main_types\": {        \"metric\": {          \"description\": \"Numerical measurement aggregated over time\",          \"proto\": \"opentelemetry/proto/metrics/v1/metrics.proto\",          \"metric_types\": [            \"Gauge\",            \"Sum\",            \"Histogram\",            \"ExponentialHistogram\",            \"Summary\"          ]        },        \"datapoint\": {          \"description\": \"Individual value of a metric at a specific point in time\",          \"proto\": \"opentelemetry/proto/metrics/v1/metrics.proto\"        }      }    },    \"logs\": {      \"status\": \"stable\",      \"endpoint\": \"/v1/logs\",      \"service\": \"ExportLogsServiceRequest\",      \"main_types\": {        \"log_record\": {          \"description\": \"Individual structured log record\",          \"proto\": \"opentelemetry/proto/logs/v1/logs.proto\"        }      }    },    \"profiles\": {      \"status\": \"development\",      \"endpoint\": \"/v1development/profiles\",      \"service\": \"ExportProfilesServiceRequest\",      \"main_types\": {        \"profile\": {          \"description\": \"CPU and memory profiling data (experimental)\",          \"proto\": \"opentelemetry/proto/profiles/v1development/profiles.proto\",          \"note\": \"Signal still in active development, subject to changes\"        }      }    }  },  \"transport_protocols\": {    \"grpc\": {      \"default_port\": 4317,      \"encoding\": \"binary protobuf\"    },    \"http\": {      \"default_port\": 4318,      \"encoding\": [\"binary protobuf\", \"JSON protobuf\"]    }  },  \"common_structures\": {    \"resource\": {      \"description\": \"Attributes that identify the entity producing telemetry (e.g., service.name, host.name)\"    },    \"instrumentation_scope\": {      \"description\": \"Library or module that generated the telemetry\"    },    \"attributes\": {      \"description\": \"Key-value pairs describing the context\",      \"supported_types\": [        \"string\",        \"int64\",        \"double\",        \"bool\",        \"bytes\",        \"array\",        \"map (since OTLP 1.9.0)\"      ]    }  }}What’s New in OTLP 1.9.0  Complex Attributes: Support for Maps and heterogeneous Arrays  Profiles Signal: Experimental addition for continuous profiling  ExponentialHistogram Improvements: Native conversion to Prometheus  Enhanced Attribute Types: All signals now support complex data types (maps, heterogeneous arrays)Common OTLP Use Cases1. Application Performance Monitoring (APM)# Configure OTLP exporter for tracesexport OTEL_EXPORTER_OTLP_ENDPOINT=\"http://localhost:4318\"export OTEL_EXPORTER_OTLP_PROTOCOL=\"http/protobuf\"export OTEL_SERVICE_NAME=\"my-service\"2. Metrics Collection# Configure metrics exportexport OTEL_EXPORTER_OTLP_METRICS_ENDPOINT=\"http://localhost:4318/v1/metrics\"export OTEL_METRICS_EXPORTER=\"otlp\"3. Log Aggregation# Configure logs exportexport OTEL_EXPORTER_OTLP_LOGS_ENDPOINT=\"http://localhost:4318/v1/logs\"export OTEL_LOGS_EXPORTER=\"otlp\"OTLP Collector ConfigurationBasic Collector Setupreceivers:  otlp:    protocols:      grpc:        endpoint: 0.0.0.0:4317      http:        endpoint: 0.0.0.0:4318processors:  batch:    timeout: 1s    send_batch_size: 1024exporters:  logging:    loglevel: debug  otlp:    endpoint: backend:4317service:  pipelines:    traces:      receivers: [otlp]      processors: [batch]      exporters: [logging, otlp]    metrics:      receivers: [otlp]      processors: [batch]      exporters: [logging, otlp]    logs:      receivers: [otlp]      processors: [batch]      exporters: [logging, otlp]Debugging OTLP DataInspecting Protobuf Messages# Decode a binary OTLP messagecat trace.bin | protoc --decode=opentelemetry.proto.trace.v1.TracesData \\  opentelemetry/proto/trace/v1/trace.proto# Validate JSON payloadcat trace.json | jq '.resourceSpans[0].scopeSpans[0].spans[0]'Testing OTLP Endpoints# Test gRPC endpointgrpcurl -plaintext -d @ localhost:4317 \\  opentelemetry.proto.collector.trace.v1.TraceService/Export &lt; trace.json# Test HTTP endpointcurl -X POST http://localhost:4318/v1/traces \\  -H \"Content-Type: application/json\" \\  -d @trace.jsonAdditional Resources  Official Specification: https://opentelemetry.io/docs/specs/otlp/  Proto Repository: https://github.com/open-telemetry/opentelemetry-proto  Semantic Conventions: https://opentelemetry.io/docs/specs/semconv/  OTLP Exporter Configuration: https://opentelemetry.io/docs/languages/sdk-configuration/otlp-exporter/Local Testing EnvironmentUsing Docker Composeversion: '3.8'services:  otel-collector:    image: otel/opentelemetry-collector:latest    ports:      - \"4317:4317\"   # OTLP gRPC      - \"4318:4318\"   # OTLP HTTP    volumes:      - ./otel-config.yaml:/etc/otel-collector-config.yaml    command: [\"--config=/etc/otel-collector-config.yaml\"]Using Kubernetes (Kind)# Deploy OTLP Collector to Kind clusterkubectl apply -f https://raw.githubusercontent.com/open-telemetry/opentelemetry-operator/main/bundle.yaml# Create Collector instancekubectl apply -f - &lt;&lt;EOFapiVersion: opentelemetry.io/v1alpha1kind: OpenTelemetryCollectormetadata:  name: otlp-collectorspec:  mode: deployment  config: |    receivers:      otlp:        protocols:          grpc:          http:    exporters:      logging:    service:      pipelines:        traces:          receivers: [otlp]          exporters: [logging]EOFBest Practices1. Choose the Right Transport  gRPC: Use for internal services, high throughput scenarios  HTTP: Use for browser-based apps, firewall-friendly environments2. Implement Batching# Configure batch processorexport OTEL_BSP_SCHEDULE_DELAY=5000  # 5 secondsexport OTEL_BSP_MAX_QUEUE_SIZE=2048export OTEL_BSP_MAX_EXPORT_BATCH_SIZE=5123. Use Compression# Enable gzip compressionexport OTEL_EXPORTER_OTLP_COMPRESSION=gzip4. Set Appropriate Timeouts# Configure timeout (in milliseconds)export OTEL_EXPORTER_OTLP_TIMEOUT=10000  # 10 seconds5. Secure Your Endpoints# Use TLS for productionexport OTEL_EXPORTER_OTLP_ENDPOINT=\"https://collector.example.com:4317\"export OTEL_EXPORTER_OTLP_CERTIFICATE=/path/to/cert.pemSignal Status (January 2025)  ✅ Traces, Metrics, Logs: Stable (production-ready)  ⚠️ Profiles: Development (subject to changes)ConclusionOTLP provides a vendor-neutral, efficient, and extensible protocol for telemetry data transmission. Understanding its data types and structure is essential for building robust observability pipelines. As the protocol continues to evolve with new signals like Profiles, it remains the foundation of modern observability practices.Last Updated: January 2025OTLP Version: 1.9.0Protocol Specification: https://opentelemetry.io/docs/specs/otlp/",
            "content_html": "<h1 id=\"exploring-the-otlp-data-format-opentelemetry-protocol\">Exploring the OTLP Data Format (OpenTelemetry Protocol)</h1><h2 id=\"introduction-to-otlp\">Introduction to OTLP</h2><p>The <strong>OpenTelemetry Protocol (OTLP)</strong> is the native and standardized protocol for transmitting telemetry data within the OpenTelemetry ecosystem. It defines how traces, metrics, logs, and profiles (experimental) are serialized, transported, and delivered between instrumented applications and observability backends.</p><h2 id=\"supported-data-types-signals\">Supported Data Types (Signals)</h2><p>OTLP works with <strong>4 main types of telemetry signals</strong>:</p><h3 id=\"1-traces-stable\">1. <strong>Traces</strong> (Stable)</h3><ul>  <li><strong>Endpoint</strong>: <code class=\"language-plaintext highlighter-rouge\">/v1/traces</code></li>  <li><strong>Main Components</strong>:    <ul>      <li><code class=\"language-plaintext highlighter-rouge\">Span</code>: Unit of work in a distributed trace</li>      <li><code class=\"language-plaintext highlighter-rouge\">SpanEvent</code>: Point-in-time event during span execution</li>      <li><code class=\"language-plaintext highlighter-rouge\">SpanLink</code>: Connections between related spans</li>    </ul>  </li>  <li><strong>Use Cases</strong>: Distributed tracing, latency analysis, bottleneck detection</li></ul><h3 id=\"2-metrics-stable\">2. <strong>Metrics</strong> (Stable)</h3><ul>  <li><strong>Endpoint</strong>: <code class=\"language-plaintext highlighter-rouge\">/v1/metrics</code></li>  <li><strong>Main Components</strong>:    <ul>      <li><code class=\"language-plaintext highlighter-rouge\">Metric</code>: Aggregated measurement (Gauge, Sum, Histogram, ExponentialHistogram, Summary)</li>      <li><code class=\"language-plaintext highlighter-rouge\">DataPoint</code>: Individual value at a specific timestamp</li>    </ul>  </li>  <li><strong>Use Cases</strong>: Performance monitoring, alerting, dashboards</li></ul><h3 id=\"3-logs-stable\">3. <strong>Logs</strong> (Stable)</h3><ul>  <li><strong>Endpoint</strong>: <code class=\"language-plaintext highlighter-rouge\">/v1/logs</code></li>  <li><strong>Main Components</strong>:    <ul>      <li><code class=\"language-plaintext highlighter-rouge\">LogRecord</code>: Structured log entry</li>    </ul>  </li>  <li><strong>Use Cases</strong>: Debugging, auditing, correlation with traces</li></ul><h3 id=\"4-profiles-development\">4. <strong>Profiles</strong> (Development)</h3><ul>  <li><strong>Endpoint</strong>: <code class=\"language-plaintext highlighter-rouge\">/v1development/profiles</code></li>  <li><strong>Main Components</strong>:    <ul>      <li><code class=\"language-plaintext highlighter-rouge\">Profile</code>: CPU and memory profiling data</li>    </ul>  </li>  <li><strong>Status</strong>: Experimental (OTLP 1.9.0)</li>  <li><strong>Use Cases</strong>: Code-level performance analysis</li></ul><h2 id=\"transport-protocols\">Transport Protocols</h2><p>OTLP supports two protocols:</p><table>  <thead>    <tr>      <th>Protocol</th>      <th>Default Port</th>      <th>Encoding</th>      <th>Recommended Use</th>    </tr>  </thead>  <tbody>    <tr>      <td><strong>gRPC</strong></td>      <td>4317</td>      <td>Binary Protobuf</td>      <td>High performance, internal communication</td>    </tr>    <tr>      <td><strong>HTTP</strong></td>      <td>4318</td>      <td>Binary Protobuf / JSON</td>      <td>Wide compatibility, web applications</td>    </tr>  </tbody></table><h2 id=\"exploring-the-otlp-schema\">Exploring the OTLP Schema</h2><h3 id=\"prerequisites\">Prerequisites</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Install required tools</span>brew <span class=\"nb\">install </span>bufbuild/buf/bufbrew <span class=\"nb\">install </span>protobuf</code></pre></div></div><h3 id=\"cloning-the-official-repository\">Cloning the Official Repository</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>git clone https://github.com/open-telemetry/opentelemetry-proto.git<span class=\"nb\">cd </span>opentelemetry-proto</code></pre></div></div><h3 id=\"viewing-protobuf-definitions\">Viewing Protobuf Definitions</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Inspect individual schemas</span><span class=\"nb\">cat </span>opentelemetry/proto/trace/v1/trace.proto<span class=\"nb\">cat </span>opentelemetry/proto/metrics/v1/metrics.proto<span class=\"nb\">cat </span>opentelemetry/proto/logs/v1/logs.proto<span class=\"nb\">cat </span>opentelemetry/proto/profiles/v1development/profiles.proto</code></pre></div></div><h3 id=\"generating-complete-schema\">Generating Complete Schema</h3><h4 id=\"option-1-json-format-readable\">Option 1: JSON Format (readable)</h4><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Generate complete schema in JSON</span>buf build <span class=\"nt\">-o</span> -#format<span class=\"o\">=</span>json | jq <span class=\"s1\">'.'</span> <span class=\"o\">&gt;</span> otlp-schema.json<span class=\"c\"># Extract only specific data types</span>buf build <span class=\"nt\">-o</span> -#format<span class=\"o\">=</span>json | <span class=\"se\">\\</span>  jq <span class=\"s1\">'.file[] | select(.name | contains(\"trace\")) | .messageType'</span> <span class=\"o\">&gt;</span> traces-schema.json</code></pre></div></div><h4 id=\"option-2-file-descriptor-set-binary\">Option 2: File Descriptor Set (binary)</h4><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Generate binary descriptor with all dependencies</span>protoc <span class=\"se\">\\</span>  <span class=\"nt\">--descriptor_set_out</span><span class=\"o\">=</span>otlp-complete.desc <span class=\"se\">\\</span>  <span class=\"nt\">--include_imports</span> <span class=\"se\">\\</span>  opentelemetry/proto/trace/v1/trace.proto <span class=\"se\">\\</span>  opentelemetry/proto/metrics/v1/metrics.proto <span class=\"se\">\\</span>  opentelemetry/proto/logs/v1/logs.proto <span class=\"se\">\\</span>  opentelemetry/proto/profiles/v1development/profiles.proto<span class=\"c\"># Inspect content (raw format)</span>protoc <span class=\"nt\">--decode_raw</span> &lt; otlp-complete.desc | <span class=\"nb\">head</span> <span class=\"nt\">-n</span> 50</code></pre></div></div><h3 id=\"validating-structure-with-buf\">Validating Structure with Buf</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Lint protobuf definitions</span>buf lint<span class=\"c\"># Check for breaking changes (comparing with previous version)</span>buf breaking <span class=\"nt\">--against</span> <span class=\"s1\">'.git#branch=main'</span><span class=\"c\"># Generate HTML documentation</span>buf build <span class=\"nt\">-o</span> -#format<span class=\"o\">=</span>json | <span class=\"se\">\\</span>  jq <span class=\"nt\">-r</span> <span class=\"s1\">'.file[].messageType[] | \"## \\(.name)\\n\\(.field[])\"'</span> <span class=\"o\">&gt;</span> docs.md</code></pre></div></div><h2 id=\"hierarchical-data-structure\">Hierarchical Data Structure</h2><p>All OTLP signals follow this hierarchy:</p><div class=\"language-ini highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"err\">ResourceSpans/ResourceMetrics/ResourceLogs/ResourceProfiles</span><span class=\"err\">└──</span> <span class=\"err\">Resource</span> <span class=\"err\">(entity</span> <span class=\"err\">attributes:</span> <span class=\"err\">service.name,</span> <span class=\"err\">host,</span> <span class=\"err\">etc)</span>    <span class=\"err\">└──</span> <span class=\"err\">ScopeSpans/ScopeMetrics/ScopeLogs/ScopeProfiles</span>        <span class=\"err\">└──</span> <span class=\"err\">InstrumentationScope</span> <span class=\"err\">(library</span> <span class=\"err\">that</span> <span class=\"err\">generated</span> <span class=\"err\">the</span> <span class=\"err\">data)</span>            <span class=\"err\">└──</span> <span class=\"err\">Spans</span> <span class=\"err\">/</span> <span class=\"err\">Metrics</span> <span class=\"err\">/</span> <span class=\"err\">LogRecords</span> <span class=\"err\">/</span> <span class=\"err\">Profiles</span></code></pre></div></div><h2 id=\"practical-example-analyzing-a-trace\">Practical Example: Analyzing a Trace</h2><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Export example trace to JSON</span>buf build <span class=\"nt\">-o</span> -#format<span class=\"o\">=</span>json | <span class=\"se\">\\</span>  jq <span class=\"s1\">'.file[] | select(.name == \"opentelemetry/proto/trace/v1/trace.proto\") |       .messageType[] | select(.name == \"Span\")'</span> <span class=\"o\">&gt;</span> span-structure.json<span class=\"c\"># Main fields of a Span</span><span class=\"nb\">cat </span>span-structure.json | jq <span class=\"s1\">'.field[] | {name, type, number}'</span></code></pre></div></div><h2 id=\"otlp-data-types-reference\">OTLP Data Types Reference</h2><h3 id=\"complete-json-schema\">Complete JSON Schema</h3><div class=\"language-json highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"p\">{</span><span class=\"w\">  </span><span class=\"nl\">\"otlp_data_types\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">    </span><span class=\"nl\">\"traces\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">      </span><span class=\"nl\">\"status\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"stable\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"endpoint\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"/v1/traces\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"service\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ExportTraceServiceRequest\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"main_types\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">        </span><span class=\"nl\">\"span\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">          </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Represents a unit of work or operation in a distributed trace\"</span><span class=\"p\">,</span><span class=\"w\">          </span><span class=\"nl\">\"proto\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"opentelemetry/proto/trace/v1/trace.proto\"</span><span class=\"w\">        </span><span class=\"p\">},</span><span class=\"w\">        </span><span class=\"nl\">\"span_event\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">          </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Point-in-time event that occurs during span execution\"</span><span class=\"p\">,</span><span class=\"w\">          </span><span class=\"nl\">\"proto\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"opentelemetry/proto/trace/v1/trace.proto\"</span><span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\">    </span><span class=\"p\">},</span><span class=\"w\">    </span><span class=\"nl\">\"metrics\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">      </span><span class=\"nl\">\"status\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"stable\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"endpoint\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"/v1/metrics\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"service\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ExportMetricsServiceRequest\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"main_types\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">        </span><span class=\"nl\">\"metric\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">          </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Numerical measurement aggregated over time\"</span><span class=\"p\">,</span><span class=\"w\">          </span><span class=\"nl\">\"proto\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"opentelemetry/proto/metrics/v1/metrics.proto\"</span><span class=\"p\">,</span><span class=\"w\">          </span><span class=\"nl\">\"metric_types\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">            </span><span class=\"s2\">\"Gauge\"</span><span class=\"p\">,</span><span class=\"w\">            </span><span class=\"s2\">\"Sum\"</span><span class=\"p\">,</span><span class=\"w\">            </span><span class=\"s2\">\"Histogram\"</span><span class=\"p\">,</span><span class=\"w\">            </span><span class=\"s2\">\"ExponentialHistogram\"</span><span class=\"p\">,</span><span class=\"w\">            </span><span class=\"s2\">\"Summary\"</span><span class=\"w\">          </span><span class=\"p\">]</span><span class=\"w\">        </span><span class=\"p\">},</span><span class=\"w\">        </span><span class=\"nl\">\"datapoint\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">          </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Individual value of a metric at a specific point in time\"</span><span class=\"p\">,</span><span class=\"w\">          </span><span class=\"nl\">\"proto\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"opentelemetry/proto/metrics/v1/metrics.proto\"</span><span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\">    </span><span class=\"p\">},</span><span class=\"w\">    </span><span class=\"nl\">\"logs\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">      </span><span class=\"nl\">\"status\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"stable\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"endpoint\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"/v1/logs\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"service\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ExportLogsServiceRequest\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"main_types\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">        </span><span class=\"nl\">\"log_record\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">          </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Individual structured log record\"</span><span class=\"p\">,</span><span class=\"w\">          </span><span class=\"nl\">\"proto\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"opentelemetry/proto/logs/v1/logs.proto\"</span><span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\">    </span><span class=\"p\">},</span><span class=\"w\">    </span><span class=\"nl\">\"profiles\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">      </span><span class=\"nl\">\"status\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"development\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"endpoint\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"/v1development/profiles\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"service\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ExportProfilesServiceRequest\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"main_types\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">        </span><span class=\"nl\">\"profile\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">          </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"CPU and memory profiling data (experimental)\"</span><span class=\"p\">,</span><span class=\"w\">          </span><span class=\"nl\">\"proto\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"opentelemetry/proto/profiles/v1development/profiles.proto\"</span><span class=\"p\">,</span><span class=\"w\">          </span><span class=\"nl\">\"note\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Signal still in active development, subject to changes\"</span><span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\">      </span><span class=\"p\">}</span><span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\">  </span><span class=\"p\">},</span><span class=\"w\">  </span><span class=\"nl\">\"transport_protocols\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">    </span><span class=\"nl\">\"grpc\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">      </span><span class=\"nl\">\"default_port\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">4317</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"encoding\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"binary protobuf\"</span><span class=\"w\">    </span><span class=\"p\">},</span><span class=\"w\">    </span><span class=\"nl\">\"http\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">      </span><span class=\"nl\">\"default_port\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">4318</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"encoding\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s2\">\"binary protobuf\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s2\">\"JSON protobuf\"</span><span class=\"p\">]</span><span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\">  </span><span class=\"p\">},</span><span class=\"w\">  </span><span class=\"nl\">\"common_structures\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">    </span><span class=\"nl\">\"resource\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">      </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Attributes that identify the entity producing telemetry (e.g., service.name, host.name)\"</span><span class=\"w\">    </span><span class=\"p\">},</span><span class=\"w\">    </span><span class=\"nl\">\"instrumentation_scope\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">      </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Library or module that generated the telemetry\"</span><span class=\"w\">    </span><span class=\"p\">},</span><span class=\"w\">    </span><span class=\"nl\">\"attributes\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">      </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Key-value pairs describing the context\"</span><span class=\"p\">,</span><span class=\"w\">      </span><span class=\"nl\">\"supported_types\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">        </span><span class=\"s2\">\"string\"</span><span class=\"p\">,</span><span class=\"w\">        </span><span class=\"s2\">\"int64\"</span><span class=\"p\">,</span><span class=\"w\">        </span><span class=\"s2\">\"double\"</span><span class=\"p\">,</span><span class=\"w\">        </span><span class=\"s2\">\"bool\"</span><span class=\"p\">,</span><span class=\"w\">        </span><span class=\"s2\">\"bytes\"</span><span class=\"p\">,</span><span class=\"w\">        </span><span class=\"s2\">\"array\"</span><span class=\"p\">,</span><span class=\"w\">        </span><span class=\"s2\">\"map (since OTLP 1.9.0)\"</span><span class=\"w\">      </span><span class=\"p\">]</span><span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\">  </span><span class=\"p\">}</span><span class=\"w\"></span><span class=\"p\">}</span><span class=\"w\"></span></code></pre></div></div><h2 id=\"whats-new-in-otlp-190\">What’s New in OTLP 1.9.0</h2><ul>  <li><strong>Complex Attributes</strong>: Support for Maps and heterogeneous Arrays</li>  <li><strong>Profiles Signal</strong>: Experimental addition for continuous profiling</li>  <li><strong>ExponentialHistogram Improvements</strong>: Native conversion to Prometheus</li>  <li><strong>Enhanced Attribute Types</strong>: All signals now support complex data types (maps, heterogeneous arrays)</li></ul><h2 id=\"common-otlp-use-cases\">Common OTLP Use Cases</h2><h3 id=\"1-application-performance-monitoring-apm\">1. Application Performance Monitoring (APM)</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Configure OTLP exporter for traces</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=\"o\">=</span><span class=\"s2\">\"http://localhost:4318\"</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_EXPORTER_OTLP_PROTOCOL</span><span class=\"o\">=</span><span class=\"s2\">\"http/protobuf\"</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_SERVICE_NAME</span><span class=\"o\">=</span><span class=\"s2\">\"my-service\"</span></code></pre></div></div><h3 id=\"2-metrics-collection\">2. Metrics Collection</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Configure metrics export</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_EXPORTER_OTLP_METRICS_ENDPOINT</span><span class=\"o\">=</span><span class=\"s2\">\"http://localhost:4318/v1/metrics\"</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_METRICS_EXPORTER</span><span class=\"o\">=</span><span class=\"s2\">\"otlp\"</span></code></pre></div></div><h3 id=\"3-log-aggregation\">3. Log Aggregation</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Configure logs export</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_EXPORTER_OTLP_LOGS_ENDPOINT</span><span class=\"o\">=</span><span class=\"s2\">\"http://localhost:4318/v1/logs\"</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_LOGS_EXPORTER</span><span class=\"o\">=</span><span class=\"s2\">\"otlp\"</span></code></pre></div></div><h2 id=\"otlp-collector-configuration\">OTLP Collector Configuration</h2><h3 id=\"basic-collector-setup\">Basic Collector Setup</h3><div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">receivers</span><span class=\"pi\">:</span>  <span class=\"na\">otlp</span><span class=\"pi\">:</span>    <span class=\"na\">protocols</span><span class=\"pi\">:</span>      <span class=\"na\">grpc</span><span class=\"pi\">:</span>        <span class=\"na\">endpoint</span><span class=\"pi\">:</span> <span class=\"s\">0.0.0.0:4317</span>      <span class=\"na\">http</span><span class=\"pi\">:</span>        <span class=\"na\">endpoint</span><span class=\"pi\">:</span> <span class=\"s\">0.0.0.0:4318</span><span class=\"na\">processors</span><span class=\"pi\">:</span>  <span class=\"na\">batch</span><span class=\"pi\">:</span>    <span class=\"na\">timeout</span><span class=\"pi\">:</span> <span class=\"s\">1s</span>    <span class=\"na\">send_batch_size</span><span class=\"pi\">:</span> <span class=\"m\">1024</span><span class=\"na\">exporters</span><span class=\"pi\">:</span>  <span class=\"na\">logging</span><span class=\"pi\">:</span>    <span class=\"na\">loglevel</span><span class=\"pi\">:</span> <span class=\"s\">debug</span>  <span class=\"na\">otlp</span><span class=\"pi\">:</span>    <span class=\"na\">endpoint</span><span class=\"pi\">:</span> <span class=\"s\">backend:4317</span><span class=\"na\">service</span><span class=\"pi\">:</span>  <span class=\"na\">pipelines</span><span class=\"pi\">:</span>    <span class=\"na\">traces</span><span class=\"pi\">:</span>      <span class=\"na\">receivers</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">otlp</span><span class=\"pi\">]</span>      <span class=\"na\">processors</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">batch</span><span class=\"pi\">]</span>      <span class=\"na\">exporters</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">logging</span><span class=\"pi\">,</span> <span class=\"nv\">otlp</span><span class=\"pi\">]</span>    <span class=\"na\">metrics</span><span class=\"pi\">:</span>      <span class=\"na\">receivers</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">otlp</span><span class=\"pi\">]</span>      <span class=\"na\">processors</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">batch</span><span class=\"pi\">]</span>      <span class=\"na\">exporters</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">logging</span><span class=\"pi\">,</span> <span class=\"nv\">otlp</span><span class=\"pi\">]</span>    <span class=\"na\">logs</span><span class=\"pi\">:</span>      <span class=\"na\">receivers</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">otlp</span><span class=\"pi\">]</span>      <span class=\"na\">processors</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">batch</span><span class=\"pi\">]</span>      <span class=\"na\">exporters</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"nv\">logging</span><span class=\"pi\">,</span> <span class=\"nv\">otlp</span><span class=\"pi\">]</span></code></pre></div></div><h2 id=\"debugging-otlp-data\">Debugging OTLP Data</h2><h3 id=\"inspecting-protobuf-messages\">Inspecting Protobuf Messages</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Decode a binary OTLP message</span><span class=\"nb\">cat </span>trace.bin | protoc <span class=\"nt\">--decode</span><span class=\"o\">=</span>opentelemetry.proto.trace.v1.TracesData <span class=\"se\">\\</span>  opentelemetry/proto/trace/v1/trace.proto<span class=\"c\"># Validate JSON payload</span><span class=\"nb\">cat </span>trace.json | jq <span class=\"s1\">'.resourceSpans[0].scopeSpans[0].spans[0]'</span></code></pre></div></div><h3 id=\"testing-otlp-endpoints\">Testing OTLP Endpoints</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Test gRPC endpoint</span>grpcurl <span class=\"nt\">-plaintext</span> <span class=\"nt\">-d</span> @ localhost:4317 <span class=\"se\">\\</span>  opentelemetry.proto.collector.trace.v1.TraceService/Export &lt; trace.json<span class=\"c\"># Test HTTP endpoint</span>curl <span class=\"nt\">-X</span> POST http://localhost:4318/v1/traces <span class=\"se\">\\</span>  <span class=\"nt\">-H</span> <span class=\"s2\">\"Content-Type: application/json\"</span> <span class=\"se\">\\</span>  <span class=\"nt\">-d</span> @trace.json</code></pre></div></div><h2 id=\"additional-resources\">Additional Resources</h2><ul>  <li><strong>Official Specification</strong>: https://opentelemetry.io/docs/specs/otlp/</li>  <li><strong>Proto Repository</strong>: https://github.com/open-telemetry/opentelemetry-proto</li>  <li><strong>Semantic Conventions</strong>: https://opentelemetry.io/docs/specs/semconv/</li>  <li><strong>OTLP Exporter Configuration</strong>: https://opentelemetry.io/docs/languages/sdk-configuration/otlp-exporter/</li></ul><h2 id=\"local-testing-environment\">Local Testing Environment</h2><h3 id=\"using-docker-compose\">Using Docker Compose</h3><div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">version</span><span class=\"pi\">:</span> <span class=\"s1\">'</span><span class=\"s\">3.8'</span><span class=\"na\">services</span><span class=\"pi\">:</span>  <span class=\"na\">otel-collector</span><span class=\"pi\">:</span>    <span class=\"na\">image</span><span class=\"pi\">:</span> <span class=\"s\">otel/opentelemetry-collector:latest</span>    <span class=\"na\">ports</span><span class=\"pi\">:</span>      <span class=\"pi\">-</span> <span class=\"s2\">\"</span><span class=\"s\">4317:4317\"</span>   <span class=\"c1\"># OTLP gRPC</span>      <span class=\"pi\">-</span> <span class=\"s2\">\"</span><span class=\"s\">4318:4318\"</span>   <span class=\"c1\"># OTLP HTTP</span>    <span class=\"na\">volumes</span><span class=\"pi\">:</span>      <span class=\"pi\">-</span> <span class=\"s\">./otel-config.yaml:/etc/otel-collector-config.yaml</span>    <span class=\"na\">command</span><span class=\"pi\">:</span> <span class=\"pi\">[</span><span class=\"s2\">\"</span><span class=\"s\">--config=/etc/otel-collector-config.yaml\"</span><span class=\"pi\">]</span></code></pre></div></div><h3 id=\"using-kubernetes-kind\">Using Kubernetes (Kind)</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Deploy OTLP Collector to Kind cluster</span>kubectl apply <span class=\"nt\">-f</span> https://raw.githubusercontent.com/open-telemetry/opentelemetry-operator/main/bundle.yaml<span class=\"c\"># Create Collector instance</span>kubectl apply <span class=\"nt\">-f</span> - <span class=\"o\">&lt;&lt;</span><span class=\"no\">EOF</span><span class=\"sh\">apiVersion: opentelemetry.io/v1alpha1kind: OpenTelemetryCollectormetadata:  name: otlp-collectorspec:  mode: deployment  config: |    receivers:      otlp:        protocols:          grpc:          http:    exporters:      logging:    service:      pipelines:        traces:          receivers: [otlp]          exporters: [logging]</span><span class=\"no\">EOF</span></code></pre></div></div><h2 id=\"best-practices\">Best Practices</h2><h3 id=\"1-choose-the-right-transport\">1. Choose the Right Transport</h3><ul>  <li><strong>gRPC</strong>: Use for internal services, high throughput scenarios</li>  <li><strong>HTTP</strong>: Use for browser-based apps, firewall-friendly environments</li></ul><h3 id=\"2-implement-batching\">2. Implement Batching</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Configure batch processor</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_BSP_SCHEDULE_DELAY</span><span class=\"o\">=</span>5000  <span class=\"c\"># 5 seconds</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_BSP_MAX_QUEUE_SIZE</span><span class=\"o\">=</span>2048<span class=\"nb\">export </span><span class=\"nv\">OTEL_BSP_MAX_EXPORT_BATCH_SIZE</span><span class=\"o\">=</span>512</code></pre></div></div><h3 id=\"3-use-compression\">3. Use Compression</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Enable gzip compression</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_EXPORTER_OTLP_COMPRESSION</span><span class=\"o\">=</span><span class=\"nb\">gzip</span></code></pre></div></div><h3 id=\"4-set-appropriate-timeouts\">4. Set Appropriate Timeouts</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Configure timeout (in milliseconds)</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_EXPORTER_OTLP_TIMEOUT</span><span class=\"o\">=</span>10000  <span class=\"c\"># 10 seconds</span></code></pre></div></div><h3 id=\"5-secure-your-endpoints\">5. Secure Your Endpoints</h3><div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"c\"># Use TLS for production</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_EXPORTER_OTLP_ENDPOINT</span><span class=\"o\">=</span><span class=\"s2\">\"https://collector.example.com:4317\"</span><span class=\"nb\">export </span><span class=\"nv\">OTEL_EXPORTER_OTLP_CERTIFICATE</span><span class=\"o\">=</span>/path/to/cert.pem</code></pre></div></div><h2 id=\"signal-status-january-2025\">Signal Status (January 2025)</h2><ul>  <li>✅ <strong>Traces, Metrics, Logs</strong>: Stable (production-ready)</li>  <li>⚠️ <strong>Profiles</strong>: Development (subject to changes)</li></ul><h2 id=\"conclusion\">Conclusion</h2><p>OTLP provides a vendor-neutral, efficient, and extensible protocol for telemetry data transmission. Understanding its data types and structure is essential for building robust observability pipelines. As the protocol continues to evolve with new signals like Profiles, it remains the foundation of modern observability practices.</p><hr /><p><strong>Last Updated</strong>: January 2025<br /><strong>OTLP Version</strong>: 1.9.0<br /><strong>Protocol Specification</strong>: https://opentelemetry.io/docs/specs/otlp/</p>",
            "url": "https://apolzek.github.io/2024/09/29/proto",
            
            
            
            
            
            "date_published": "2024-09-29T00:00:00+00:00",
            "date_modified": "2024-09-29T00:00:00+00:00",
            
                "author":  {
                "name": "apolzek",
                "url": null,
                "avatar": null
                }
                
            
        }
    
    ]
}